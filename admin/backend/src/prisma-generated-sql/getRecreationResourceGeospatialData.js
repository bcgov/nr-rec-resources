/* !!! This is code generated by Prisma. Do not edit directly. !!!
/* eslint-disable */
'use strict';
const {
  makeTypedQueryFactory: $mkFactory,
} = require('@prisma/client/runtime/library');
exports.getRecreationResourceGeospatialData = /*#__PURE__*/ $mkFactory(
  '\nWITH feature_data AS (\nSELECT\nrmf.rec_resource_id,\narray_agg(public.st_asgeojson(rmfg.geometry)) as spatial_feature_geometry,\npublic.ST_Centroid(public.ST_Collect(rmfg.geometry)) as feature_centroid\nFROM rst.recreation_map_feature rmf\nINNER JOIN rst.recreation_map_feature_geom rmfg USING (rmf_skey)\nWHERE rmf.rec_resource_id = $1\nAND rmf.retirement_date IS NULL\nGROUP BY rmf.rec_resource_id\n),\nsite_data AS (\nSELECT\nrec_resource_id,\ngeometry as site_geometry\nFROM rst.recreation_site_point\nWHERE rec_resource_id = $1\n)\nSELECT\nfd.spatial_feature_geometry,\npublic.st_asgeojson(COALESCE(sd.site_geometry, fd.feature_centroid)) as site_point_geometry,\nCASE\nWHEN COALESCE(sd.site_geometry, fd.feature_centroid) IS NOT NULL THEN\npublic.ST_Y(public.ST_Transform(\nCASE\nWHEN public.ST_SRID(COALESCE(sd.site_geometry, fd.feature_centroid)) = 0\nTHEN public.ST_SetSRID(COALESCE(sd.site_geometry, fd.feature_centroid), 3005)\nELSE COALESCE(sd.site_geometry, fd.feature_centroid)\nEND,\n4326\n))\nELSE NULL\nEND as latitude,\nCASE\nWHEN COALESCE(sd.site_geometry, fd.feature_centroid) IS NOT NULL THEN\npublic.ST_X(public.ST_Transform(\nCASE\nWHEN public.ST_SRID(COALESCE(sd.site_geometry, fd.feature_centroid)) = 0\nTHEN public.ST_SetSRID(COALESCE(sd.site_geometry, fd.feature_centroid), 3005)\nELSE COALESCE(sd.site_geometry, fd.feature_centroid)\nEND,\n4326\n))\nELSE NULL\nEND as longitude,\nCASE\nWHEN COALESCE(sd.site_geometry, fd.feature_centroid) IS NOT NULL THEN\nFLOOR((public.ST_X(public.ST_Transform(\nCASE\nWHEN public.ST_SRID(COALESCE(sd.site_geometry, fd.feature_centroid)) = 0\nTHEN public.ST_SetSRID(COALESCE(sd.site_geometry, fd.feature_centroid), 3005)\nELSE COALESCE(sd.site_geometry, fd.feature_centroid)\nEND,\n4326\n)) + 180) / 6)::integer + 1\nELSE NULL\nEND as utm_zone,\nCASE\nWHEN COALESCE(sd.site_geometry, fd.feature_centroid) IS NOT NULL THEN\nROUND(public.ST_X(public.ST_Transform(\nCASE\nWHEN public.ST_SRID(COALESCE(sd.site_geometry, fd.feature_centroid)) = 0\nTHEN public.ST_SetSRID(COALESCE(sd.site_geometry, fd.feature_centroid), 3005)\nELSE COALESCE(sd.site_geometry, fd.feature_centroid)\nEND,\n32600 + FLOOR((public.ST_X(public.ST_Transform(\nCASE\nWHEN public.ST_SRID(COALESCE(sd.site_geometry, fd.feature_centroid)) = 0\nTHEN public.ST_SetSRID(COALESCE(sd.site_geometry, fd.feature_centroid), 3005)\nELSE COALESCE(sd.site_geometry, fd.feature_centroid)\nEND,\n4326\n)) + 180) / 6)::integer + 1\n)))::integer\nELSE NULL\nEND as utm_easting,\nCASE\nWHEN COALESCE(sd.site_geometry, fd.feature_centroid) IS NOT NULL THEN\nROUND(public.ST_Y(public.ST_Transform(\nCASE\nWHEN public.ST_SRID(COALESCE(sd.site_geometry, fd.feature_centroid)) = 0\nTHEN public.ST_SetSRID(COALESCE(sd.site_geometry, fd.feature_centroid), 3005)\nELSE COALESCE(sd.site_geometry, fd.feature_centroid)\nEND,\n32600 + FLOOR((public.ST_X(public.ST_Transform(\nCASE\nWHEN public.ST_SRID(COALESCE(sd.site_geometry, fd.feature_centroid)) = 0\nTHEN public.ST_SetSRID(COALESCE(sd.site_geometry, fd.feature_centroid), 3005)\nELSE COALESCE(sd.site_geometry, fd.feature_centroid)\nEND,\n4326\n)) + 180) / 6)::integer + 1\n)))::integer\nELSE NULL\nEND as utm_northing\nFROM feature_data fd\nLEFT JOIN site_data sd ON fd.rec_resource_id = sd.rec_resource_id;',
);
