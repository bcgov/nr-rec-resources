/* !!! This is code generated by Prisma. Do not edit directly. !!!
/* eslint-disable */
'use strict';
const {
  makeTypedQueryFactory: $mkFactory,
} = require('@prisma/client/runtime/library');
exports.getRecreationResourceGeospatialData = /*#__PURE__*/ $mkFactory(
  '\nWITH feature_data AS (\nSELECT\nrmf.rec_resource_id,\narray_agg(public.st_asgeojson(rmfg.geometry)) as spatial_feature_geometry\nFROM rst.recreation_map_feature rmf\nINNER JOIN rst.recreation_map_feature_geom rmfg USING (rmf_skey)\nWHERE rmf.rec_resource_id = $1\nAND rmf.retirement_date IS NULL\nGROUP BY rmf.rec_resource_id\n),\nsite_data AS (\nSELECT\nrec_resource_id,\ngeometry as site_geometry\nFROM rst.recreation_site_point\nWHERE rec_resource_id = $1\n),\nsite_geometry_normalized AS (\nSELECT\nsd.rec_resource_id,\nsd.site_geometry,\nCASE\nWHEN sd.site_geometry IS NULL THEN NULL\nWHEN public.ST_SRID(sd.site_geometry) = 0\nTHEN public.ST_SetSRID(sd.site_geometry, 3005)\nELSE sd.site_geometry\nEND as geometry_with_srid\nFROM site_data sd\n),\nsite_coordinates AS (\nSELECT\nrec_resource_id,\nsite_geometry,\ngeometry_with_srid,\npublic.ST_Transform(geometry_with_srid, 4326) as wgs84_geometry,\npublic.ST_X(public.ST_Transform(geometry_with_srid, 4326)) as longitude_raw,\npublic.ST_Y(public.ST_Transform(geometry_with_srid, 4326)) as latitude_raw,\nFLOOR((public.ST_X(public.ST_Transform(geometry_with_srid, 4326)) + 180) / 6)::integer + 1 as utm_zone,\n32600 + FLOOR((public.ST_X(public.ST_Transform(geometry_with_srid, 4326)) + 180) / 6)::integer + 1 as utm_srid\nFROM site_geometry_normalized\nWHERE geometry_with_srid IS NOT NULL\n)\nSELECT\nCOALESCE(fd.spatial_feature_geometry, ARRAY[]::text[]) as spatial_feature_geometry,\npublic.st_asgeojson(sc.site_geometry) as site_point_geometry,\nROUND(sc.latitude_raw::numeric, 4) as latitude,\nROUND(sc.longitude_raw::numeric, 4) as longitude,\nsc.utm_zone,\nROUND(public.ST_X(public.ST_Transform(sc.geometry_with_srid, sc.utm_srid)))::integer as utm_easting,\nROUND(public.ST_Y(public.ST_Transform(sc.geometry_with_srid, sc.utm_srid)))::integer as utm_northing\nFROM feature_data fd\nFULL OUTER JOIN site_coordinates sc ON fd.rec_resource_id = sc.rec_resource_id;',
);
